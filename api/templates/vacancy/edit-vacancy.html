{% extends 'base.html' %}

{% block content %}
<h1>Edit Vacancy</h1>
<form method="post" id="vacancy-form">
    {% csrf_token %}

    <div>
        {{ form.title.label_tag }}
        {{ form.title }}
    </div>

    <div>
        {{ form.country.label_tag }}
        {{ form.country }}
    </div>

    <div>
        {{ form.state.label_tag }}
        {{ form.state }}
    </div>

    <div>
        {{ form.city.label_tag }}
        {{ form.city }}
    </div>

    <div>
        {{ form.text.label_tag }}
        {{ form.text }}
    </div>

    <div>
        {{ form.salary.label_tag }}
        {{ form.salary }}
    </div>

    <div>
        {{ form.currency.label_tag }}
        {{ form.currency }}
    </div>

    <div>
        {{ form.salary_type.label_tag }}
        {{ form.salary_type }}
    </div>

    <div id="tagSearchDiv" class="mb-4">
        <label for="skill-input">Skills:</label>
        <div class="border border-dark-subtle border-1 d-flex p-2 rounded-4 mb-2" id="selected-skills">
            <span class="text-muted">Nothing is selected</span>
            <!-- <button class="btn btn-outline-secondary rounded-pill">Python</button> -->
        </div>
        <input type="text" class="form-select" id="skill-input" autocomplete="off" name="skill"
            placeholder="Select required or recomendated skills">
        <ul class="list-group" id="skills-list"
            style="position: absolute; max-height: 150%; overflow-y: auto; display: none; width: 100%;">
            <!--  -->
        </ul>
    </div>

    <div id="tagsInputDiv" hidden>
        {{ form.tags }}
    </div>
    <div hidden>
        {{ form.media }}
    </div>

    <div class="d-flex flex-row flex-wrap justify-content-center" id="media">

    </div>

    <div class="d-flex flex-column flex-fill align-items-center my-2 border border-2 border-secondary p-3 rounded-3">
        <label class="fs-5" for="mediaInput">Upload additional media to your vacancy</label>
        <div class="d-flex row w-100">
            <input type="file" id="mediaInput" class="form-control col" accept="image/*" multiple>
            <button id="uploadMediaBtn" onclick="postMediaBtn()" class="btn btn-success col">Upload</button>
        </div>
    </div>

    <button type="submit" class="btn btn-primary mt-4 w-100">Submit</button>
</form>

{{ manyToManyFields|json_script:"manyToManyFields" }}

{% load static %}
<script>
    const csrfToken = document.querySelector("[name=csrfmiddlewaretoken]").value;
</script>
<script src="{% static 'js/alert.js' %}"></script>
<script src="{% static 'js/search-skills.js' %}"></script>
<script src="{% static 'js/edit-page.js' %}"></script>
<script src="{% static 'js/location.js' %}"></script>
<script src="{% static 'js/retrieve-media.js' %}"></script>
<script src="{% static 'js/upload-media.js' %}"></script>
<script src="{% static 'js/edit-vacancy.js' %}"></script>
{% endblock %}